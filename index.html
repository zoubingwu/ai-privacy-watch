<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLM Privacy Policy Deep Dive</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Chosen Palette: Warm Neutral / Slate -->
  <!-- Primary Background: #f8fafc (slate-50) -->
  <!-- Card Background: #ffffff (white) -->
  <!-- Text Primary: #1e293b (slate-800) -->
  <!-- Accents: #3b82f6 (blue-500 for US), #ef4444 (red-500 for CN), #10b981 (emerald-500 for Safe) -->

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f8fafc;
      color: #1e293b;
    }

    /* Chart Container Styling - Mandatory Requirement */
    .chart-container {
      position: relative;
      width: 100%;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      height: 300px;
      max-height: 400px;
    }

    @media (min-width: 768px) {
      .chart-container {
        height: 350px;
      }
    }

    .marker-us {
      border-left: 4px solid #3b82f6;
    }

    .marker-cn {
      border-left: 4px solid #ef4444;
    }

    .risk-low {
      background-color: #d1fae5;
      color: #065f46;
    }

    .risk-med {
      background-color: #fef3c7;
      color: #92400e;
    }

    .risk-high {
      background-color: #fee2e2;
      color: #991b1b;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f5f9;
    }

    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }

    .nav-active {
      border-bottom: 2px solid #3b82f6;
      color: #3b82f6;
      font-weight: 600;
    }
  </style>

  <!-- Application Structure Plan:
         1. Header & Navigation: Simple sticky nav.
         2. Executive Dashboard: High-level charts (Radar & Doughnut) showing the "Big Picture".
         3. Vendor Comparison Matrix: The core interactive section. Users can filter by Region. Cards expand to show details.
         4. Regional Deep Dive: Text-heavy but structured analysis of GDPR/Copyright vs China Compliance.
         5. Data Journey Simulator: A linear visual flow explaining "Where does my prompt go?".
         6. Risk Calculator: Input form -> Logic -> Output Recommendation.
    -->

  <!-- Visualization & Content Choices:
         1. Radar Chart (Chart.js): Comparing aggregate "Privacy Scores" of US vs CN models.
         2. Doughnut Chart (Chart.js): Visualizing % of models that train on user data by default.
         3. Risk Meter (CSS/JS): Dynamic gauge based on user questionnaire.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
</head>

<body class="antialiased">

  <!-- Navigation -->
  <nav class="bg-white shadow-sm sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <span class="text-xl font-bold text-slate-800 tracking-tight">AI Privacy<span
              class="text-blue-600">Watch</span></span>
        </div>
        <div class="hidden sm:flex space-x-8 items-center">
          <button onclick="scrollToSection('dashboard')"
            class="text-slate-600 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors">Overview</button>
          <button onclick="scrollToSection('matrix')"
            class="text-slate-600 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors">Vendor
            Matrix</button>
          <button onclick="scrollToSection('regional')"
            class="text-slate-600 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors">US vs
            China</button>
          <button onclick="scrollToSection('calculator')"
            class="bg-blue-600 text-white hover:bg-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-md">Risk
            Check</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

    <!-- Intro -->
    <div class="text-center max-w-3xl mx-auto mb-12">
      <h1 class="text-4xl font-extrabold text-slate-900 mb-4">Is Your Prompt Training Their Model?</h1>
      <p class="text-lg text-slate-600 leading-relaxed">
        A deep dive into the privacy policies of Google, OpenAI, Alibaba, Moonshot, and more.
        <span class="font-semibold text-slate-800">Key Finding:</span> Free consumer data is "fuel" for training, while
        Enterprise editions offer the data isolation you likely need.
      </p>
    </div>

    <!-- Section 1: Dashboard -->
    <section id="dashboard" class="scroll-mt-20">
      <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 sm:p-8">
        <div class="mb-6 border-b border-slate-100 pb-4">
          <h2 class="text-2xl font-bold text-slate-800">Executive Privacy Dashboard</h2>
          <p class="text-slate-500 mt-1 text-sm">Aggregate analysis based on public 2024 Terms of Service & Privacy
            Policies.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
          <!-- Left: Radar Chart -->
          <div class="bg-slate-50 rounded-xl p-4">
            <h3 class="text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4 text-center">Regional Policy
              Focus</h3>
            <div class="chart-container">
              <canvas id="radarChart"></canvas>
            </div>
            <div class="text-center mt-2 text-xs text-slate-400">Source: 2024 Vendor Privacy Agreements</div>
          </div>

          <!-- Right: Key Stats & Doughnut -->
          <div class="space-y-6">
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                <div class="text-2xl font-bold text-blue-700">85%</div>
                <div class="text-xs text-blue-600 mt-1">Consumer Apps Train on Data by Default</div>
              </div>
              <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-100">
                <div class="text-2xl font-bold text-emerald-700">100%</div>
                <div class="text-xs text-emerald-600 mt-1">Enterprise APIs Promise Data Isolation</div>
              </div>
            </div>

            <div class="bg-white border border-slate-200 rounded-lg p-4">
              <h3 class="text-sm font-semibold text-slate-700 mb-2">Default Training Policy (Consumer)</h3>
              <div class="chart-container" style="height: 200px;">
                <canvas id="doughnutChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2: Vendor Matrix -->
    <section id="matrix" class="scroll-mt-20">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
        <div>
          <h2 class="text-2xl font-bold text-slate-800">Vendor Privacy Matrix</h2>
          <p class="text-slate-500 text-sm mt-1">Compare data retention and human review policies across major
            providers.</p>
        </div>

        <!-- Filters -->
        <div class="flex bg-white rounded-lg shadow-sm border border-slate-200 p-1">
          <button onclick="setFilter('all')" id="btn-all"
            class="px-4 py-2 text-sm font-medium rounded-md bg-slate-100 text-slate-800">All</button>
          <button onclick="setFilter('us')" id="btn-us"
            class="px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50">US / Global</button>
          <button onclick="setFilter('cn')" id="btn-cn"
            class="px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50">China</button>
        </div>
      </div>

      <div id="cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Cards will be injected by JS -->
      </div>
    </section>

    <!-- Section 3: US vs China Deep Dive -->
    <section id="regional" class="scroll-mt-20">
      <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
        <div class="p-8 bg-slate-900 text-white">
          <h2 class="text-2xl font-bold">Regulatory Divergence: US vs China</h2>
          <p class="text-slate-300 mt-2">Both regions prioritize security, but their regulatory engines drive in
            different directions.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2">
          <!-- US Side -->
          <div class="p-8 border-b md:border-b-0 md:border-r border-slate-100">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold">
                US</div>
              <h3 class="text-xl font-bold text-slate-800">US / EU Model</h3>
            </div>
            <ul class="space-y-4">
              <li class="flex items-start gap-3">
                <span class="mt-1 text-blue-500">‚óè</span>
                <div>
                  <strong class="block text-slate-700">Focus: Copyright & PII</strong>
                  <p class="text-sm text-slate-500">Major legal battles surround copyright infringement (e.g., NYT
                    lawsuit) and GDPR compliance regarding Personal Identifiable Information (PII).</p>
                </div>
              </li>
              <li class="flex items-start gap-3">
                <span class="mt-1 text-blue-500">‚óè</span>
                <div>
                  <strong class="block text-slate-700">Opt-out Mechanism</strong>
                  <p class="text-sm text-slate-500">Generally operate on a "Consent by Default" basis. Users must
                    actively dig into settings to find "Data Controls" and opt-out of training.</p>
                </div>
              </li>
              <li class="flex items-start gap-3">
                <span class="mt-1 text-blue-500">‚óè</span>
                <div>
                  <strong class="block text-slate-700">Black Box Transparency</strong>
                  <p class="text-sm text-slate-500">Companies like OpenAI are becoming increasingly opaque about
                    specific training datasets, citing trade secrets.</p>
                </div>
              </li>
            </ul>
          </div>

          <!-- China Side -->
          <div class="p-8">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-600 font-bold">CN
              </div>
              <h3 class="text-xl font-bold text-slate-800">China Model</h3>
            </div>
            <ul class="space-y-4">
              <li class="flex items-start gap-3">
                <span class="mt-1 text-red-500">‚óè</span>
                <div>
                  <strong class="block text-slate-700">Focus: Content Compliance</strong>
                  <p class="text-sm text-slate-500">Governed by the "Interim Measures for Generative AI," emphasizing
                    truthfulness, accuracy, and social stability.</p>
                </div>
              </li>
              <li class="flex items-start gap-3">
                <span class="mt-1 text-red-500">‚óè</span>
                <div>
                  <strong class="block text-slate-700">Real-Name Verification</strong>
                  <p class="text-sm text-slate-500">Mobile phone verification is mandatory. Anonymity is low, and data
                    is traceable to specific users.</p>
                </div>
              </li>
              <li class="flex items-start gap-3">
                <span class="mt-1 text-red-500">‚óè</span>
                <div>
                  <strong class="block text-slate-700">Enterprise Isolation</strong>
                  <p class="text-sm text-slate-500">To encourage industrial adoption, Chinese vendors (e.g., Alibaba,
                    Zhipu) provide strict, legally binding data isolation for B2B API clients.</p>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Data Journey Simulator -->
    <section class="bg-white rounded-2xl p-6 border border-slate-200">
      <h2 class="text-xl font-bold text-slate-800 mb-6">The Data Journey: Where Does It Go?</h2>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
        <!-- Step 1 -->
        <div class="relative p-4 rounded-lg bg-slate-50 border border-slate-100">
          <div class="text-3xl mb-2">üßë‚Äçüíª</div>
          <h4 class="font-bold text-slate-700">1. User Input</h4>
          <p class="text-xs text-slate-500 mt-2">You paste sensitive code or data.</p>
        </div>

        <!-- Connector -->
        <div class="hidden md:flex items-center justify-center text-slate-300">
          <span class="text-2xl">‚ûî</span>
        </div>

        <!-- Step 2 -->
        <div class="relative p-4 rounded-lg bg-slate-50 border border-slate-100">
          <div class="text-3xl mb-2">‚òÅÔ∏è</div>
          <h4 class="font-bold text-slate-700">2. Processing</h4>
          <p class="text-xs text-slate-500 mt-2">Context cached to generate reply.</p>
        </div>

        <!-- Connector -->
        <div class="hidden md:flex items-center justify-center text-slate-300">
          <span class="text-2xl">‚ûî</span>
        </div>

        <!-- Step 3 (Split) -->
        <div class="relative p-4 rounded-lg bg-yellow-50 border border-yellow-100">
          <div class="absolute top-0 right-0 -mt-2 -mr-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">
            Critical Junction</div>
          <div class="text-3xl mb-2">üîç</div>
          <h4 class="font-bold text-slate-800">3. Sanitization</h4>
          <p class="text-xs text-slate-600 mt-2">PII removal (Success varies by vendor).</p>
        </div>

        <!-- Connector -->
        <div class="hidden md:flex items-center justify-center text-slate-300">
          <span class="text-2xl">‚ûî</span>
        </div>

        <!-- Step 4 Result -->
        <div class="relative p-4 rounded-lg bg-slate-50 border border-slate-100">
          <div class="text-3xl mb-2">ü§ñ</div>
          <h4 class="font-bold text-slate-700">4. Training</h4>
          <p class="text-xs text-slate-500 mt-2">If Free/Consumer, data enters the model.</p>
        </div>
      </div>
    </section>

    <!-- Section 5: Risk Calculator -->
    <section id="calculator"
      class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl shadow-lg p-8 text-white scroll-mt-20">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold mb-2">üõ°Ô∏è Privacy Risk Calculator</h2>
        <p class="text-slate-300 mb-8 text-sm">Answer 3 questions to assess your current exposure.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Form -->
          <div class="space-y-6">
            <div>
              <label class="block text-sm font-medium text-slate-300 mb-2">1. Which version do you use?</label>
              <select id="calc-version"
                class="w-full bg-slate-700 border-slate-600 rounded-md text-white p-2 focus:ring-2 focus:ring-blue-500 outline-none">
                <option value="free">Free Consumer (Web/App)</option>
                <option value="paid_personal">Paid Personal (ChatGPT Plus/Claude Pro)</option>
                <option value="api">Developer API</option>
                <option value="enterprise">Enterprise (Team/Workspace)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-300 mb-2">2. What data do you input?</label>
              <select id="calc-data"
                class="w-full bg-slate-700 border-slate-600 rounded-md text-white p-2 focus:ring-2 focus:ring-blue-500 outline-none">
                <option value="general">General (Recipes, Travel plans)</option>
                <option value="code">Company Code (No secrets)</option>
                <option value="pii">PII (Names, Phones, Addresses)</option>
                <option value="secrets">Core Secrets / API Keys / Financials</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-300 mb-2">3. Have you manually Opted-Out?</label>
              <select id="calc-optout"
                class="w-full bg-slate-700 border-slate-600 rounded-md text-white p-2 focus:ring-2 focus:ring-blue-500 outline-none">
                <option value="no">No / Don't know how</option>
                <option value="yes">Yes, I turned off history/training</option>
              </select>
            </div>
            <button onclick="calculateRisk()"
              class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg transition-all transform active:scale-95">
              Calculate Risk Level
            </button>
          </div>

          <!-- Result Display -->
          <div id="result-panel"
            class="bg-slate-700/50 rounded-xl p-6 flex flex-col justify-center items-center text-center hidden">
            <div id="risk-badge" class="px-4 py-1 rounded-full text-xs font-bold uppercase mb-4 tracking-wider">Result
            </div>
            <h3 id="risk-title" class="text-3xl font-bold mb-2">--</h3>
            <p id="risk-desc" class="text-slate-300 text-sm mb-6">--</p>

            <div class="w-full text-left bg-slate-800/80 p-4 rounded-lg">
              <h4 class="text-xs font-bold text-slate-400 uppercase mb-2">Recommended Actions:</h4>
              <ul id="risk-actions" class="text-sm space-y-2 list-disc list-inside text-slate-200">
                <!-- Actions injected here -->
              </ul>
            </div>
          </div>

          <!-- Placeholder before calc -->
          <div id="result-placeholder"
            class="bg-slate-700/20 rounded-xl p-6 flex flex-col justify-center items-center text-center border-2 border-dashed border-slate-600">
            <span class="text-4xl opacity-50 mb-2">üìä</span>
            <p class="text-slate-400">Click button to assess risk</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="border-t border-slate-200 pt-8 pb-12 text-center">
      <p class="text-slate-400 text-sm">
        Disclaimer: Analysis based on publicly available privacy policies as of 2024.<br>
        This app is for informational purposes only and does not constitute legal advice.
      </p>
    </footer>

  </main>

  <!-- Data & Logic -->
  <script>
    // --- DATA STORE ---
    const vendors = [
      {
        id: 'openai',
        name: 'OpenAI (GPT-4)',
        region: 'us',
        type: 'Consumer',
        trainsOnData: true,
        retention: '30 Days (Even if Opt-out)',
        humanReview: 'Yes (Sampled)',
        details: 'Free and Plus versions train on your data by default. You must disable "Chat History & Training" to opt-out. API and Enterprise data is NOT used for training.',
        color: 'blue'
      },
      {
        id: 'google',
        name: 'Google (Gemini)',
        region: 'us',
        type: 'Consumer',
        trainsOnData: true,
        retention: 'Up to 18 Months',
        humanReview: 'Yes (De-identified)',
        details: 'Consumer Gemini collects data to improve models. Human reviewers may read de-identified snippets. Gemini for Workspace (Enterprise) does NOT train on data.',
        color: 'blue'
      },
      {
        id: 'anthropic',
        name: 'Anthropic (Claude)',
        region: 'us',
        type: 'Consumer',
        trainsOnData: false,
        retention: '90 Days (Security)',
        humanReview: 'Rare (Security only)',
        details: 'More privacy-focused by default. Policy states they do not use prompts for training unless you explicitly submit feedback (thumbs up/down).',
        color: 'blue'
      },
      {
        id: 'ali',
        name: 'Alibaba (Qwen)',
        region: 'cn',
        type: 'Consumer',
        trainsOnData: true,
        retention: 'Per Compliance (6mo+)',
        humanReview: 'Yes (Compliance)',
        details: 'Complies with "Interim Measures." Consumer data optimizes models. Bailian (API) platform offers strict tenant data isolation.',
        color: 'red'
      },
      {
        id: 'moonshot',
        name: 'Moonshot (Kimi)',
        region: 'cn',
        type: 'Consumer',
        trainsOnData: true,
        retention: 'Long Term',
        humanReview: 'Yes',
        details: 'Focuses on long-context processing. Privacy policy allows using non-personal information for service optimization and model training.',
        color: 'red'
      },
      {
        id: 'zhipu',
        name: 'Zhipu AI (GLM)',
        region: 'cn',
        type: 'Consumer',
        trainsOnData: true,
        retention: 'Long Term',
        humanReview: 'Yes',
        details: 'Strong B2B focus with private deployment options. Consumer apps collect interaction data to improve experience and model quality.',
        color: 'red'
      },
      {
        id: 'minimax',
        name: 'MiniMax',
        region: 'cn',
        type: 'Consumer',
        trainsOnData: true,
        retention: 'Long Term',
        humanReview: 'Yes',
        details: 'Known for roleplay/speech models. Strong content monitoring. Policy permits use of de-identified data for model iteration.',
        color: 'red'
      }
    ];

    // --- RENDER FUNCTIONS ---

    function renderCards(filter) {
      const container = document.getElementById('cards-container');
      container.innerHTML = '';

      const filteredVendors = filter === 'all'
        ? vendors
        : vendors.filter(v => v.region === filter);

      filteredVendors.forEach(v => {
        const isUS = v.region === 'us';
        const borderColor = isUS ? 'border-l-blue-500' : 'border-l-red-500';
        const tagBg = isUS ? 'bg-blue-100 text-blue-700' : 'bg-red-100 text-red-700';
        const regionLabel = isUS ? 'USA' : 'CHN';

        const card = document.createElement('div');
        card.className = `bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition-shadow ${borderColor} border-l-4`;

        card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span class="text-xs font-bold ${tagBg} px-2 py-1 rounded mb-2 inline-block">${regionLabel}</span>
                            <h3 class="text-lg font-bold text-slate-800">${v.name}</h3>
                        </div>
                        <div class="text-right">
                            ${v.trainsOnData
            ? '<span class="text-xs font-semibold text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100">Trains on Data</span>'
            : '<span class="text-xs font-semibold text-emerald-600 bg-emerald-50 px-2 py-1 rounded border border-emerald-100">No Default Training</span>'}
                        </div>
                    </div>

                    <div class="space-y-3 text-sm text-slate-600 mb-6">
                        <div class="flex justify-between border-b border-slate-50 pb-2">
                            <span>Retention:</span>
                            <span class="font-medium">${v.retention}</span>
                        </div>
                        <div class="flex justify-between border-b border-slate-50 pb-2">
                            <span>Human Review:</span>
                            <span class="font-medium">${v.humanReview}</span>
                        </div>
                    </div>

                    <div class="bg-slate-50 rounded p-3 text-xs text-slate-500 leading-relaxed">
                        ${v.details}
                    </div>
                `;
        container.appendChild(card);
      });
    }

    function setFilter(filter) {
      // Update buttons
      ['all', 'us', 'cn'].forEach(f => {
        const btn = document.getElementById(`btn-${f}`);
        if (f === filter) {
          btn.className = 'px-4 py-2 text-sm font-medium rounded-md bg-slate-100 text-slate-800 shadow-sm';
        } else {
          btn.className = 'px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:bg-slate-50';
        }
      });
      renderCards(filter);
    }

    // --- CHART INITIALIZATION ---

    function initCharts() {
      // Radar Chart
      const ctxRadar = document.getElementById('radarChart').getContext('2d');
      new Chart(ctxRadar, {
        type: 'radar',
        data: {
          labels: ['Transparency', 'User Control', 'Data Isolation', 'Compliance Rigor', 'Anonymity'],
          datasets: [{
            label: 'US / Global (Avg)',
            data: [70, 85, 90, 60, 75],
            fill: true,
            backgroundColor: 'rgba(59, 130, 246, 0.2)',
            borderColor: 'rgb(59, 130, 246)',
            pointBackgroundColor: 'rgb(59, 130, 246)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(59, 130, 246)'
          }, {
            label: 'China (Avg)',
            data: [50, 60, 85, 95, 40],
            fill: true,
            backgroundColor: 'rgba(239, 68, 68, 0.2)',
            borderColor: 'rgb(239, 68, 68)',
            pointBackgroundColor: 'rgb(239, 68, 68)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(239, 68, 68)'
          }]
        },
        options: {
          maintainAspectRatio: false,
          elements: {
            line: { borderWidth: 3 }
          },
          scales: {
            r: {
              angleLines: { display: true },
              suggestedMin: 0,
              suggestedMax: 100
            }
          }
        }
      });

      // Doughnut Chart
      const ctxDoughnut = document.getElementById('doughnutChart').getContext('2d');
      new Chart(ctxDoughnut, {
        type: 'doughnut',
        data: {
          labels: ['Trains on Data', 'No Training', 'Conditional'],
          datasets: [{
            data: [5, 1, 1],
            backgroundColor: [
              '#ef4444', // Red
              '#10b981', // Emerald
              '#f59e0b'  // Amber
            ],
            hoverOffset: 4
          }]
        },
        options: {
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'right',
            }
          }
        }
      });
    }

    // --- RISK CALCULATOR LOGIC ---

    function calculateRisk() {
      const version = document.getElementById('calc-version').value;
      const data = document.getElementById('calc-data').value;
      const optout = document.getElementById('calc-optout').value;

      let score = 0;
      // Base Risk
      if (version === 'free') score += 50;
      if (version === 'paid_personal') score += 30;
      if (version === 'api' || version === 'enterprise') score += 0;

      // Data Sensitivity Risk
      if (data === 'general') score += 0;
      if (data === 'code') score += 20;
      if (data === 'pii') score += 40;
      if (data === 'secrets') score += 100;

      // Mitigation
      if (optout === 'yes' && version !== 'api' && version !== 'enterprise') score -= 30;

      // Determine Level
      let level = '';
      let colorClass = '';
      let title = '';
      let desc = '';
      let actions = [];

      if (score >= 80) {
        level = 'high';
        colorClass = 'bg-red-500 text-white';
        title = 'HIGH RISK üö®';
        desc = 'Your usage pattern is very likely to leak sensitive data into public models.';
        actions = [
          'Stop inputting this type of data immediately.',
          'For code/secrets, you MUST switch to an Enterprise or API plan.',
          'Check if you can manually delete chat history.'
        ];
      } else if (score >= 40) {
        level = 'med';
        colorClass = 'bg-yellow-500 text-white';
        title = 'MEDIUM RISK ‚ö†Ô∏è';
        desc = 'Your data might be used for training. Risk is manageable but requires caution.';
        actions = [
          'Go to settings and disable "Chat History & Training" (Opt-out).',
          'Manually sanitize names/locations before sending prompts.'
        ];
      } else {
        level = 'low';
        colorClass = 'bg-emerald-500 text-white';
        title = 'SAFE ‚úÖ';
        desc = 'Your usage habits are secure. Low risk of data leakage.';
        actions = [
          'Keep up the good habits.',
          'Check periodically for privacy policy updates.'
        ];
      }

      // Update UI
      document.getElementById('result-placeholder').classList.add('hidden');
      const panel = document.getElementById('result-panel');
      panel.classList.remove('hidden');

      const badge = document.getElementById('risk-badge');
      badge.className = `px-4 py-1 rounded-full text-xs font-bold uppercase mb-4 tracking-wider ${colorClass}`;
      badge.innerText = level === 'high' ? 'High Risk' : (level === 'med' ? 'Medium Risk' : 'Safe');

      document.getElementById('risk-title').innerText = title;
      document.getElementById('risk-desc').innerText = desc;

      const actionList = document.getElementById('risk-actions');
      actionList.innerHTML = actions.map(a => `<li>${a}</li>`).join('');
    }

    // --- UTILS ---
    function scrollToSection(id) {
      document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    }

    // --- INIT ---
    window.addEventListener('DOMContentLoaded', () => {
      renderCards('all');
      initCharts();
    });

  </script>
</body>

</html>